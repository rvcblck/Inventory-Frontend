<div class="main-container" *ngIf="filteredInventoryData">
  <div class="product-list">
    <div class="product-list-header d-flex justify-content-between">
      <div class="container-input d-flex align-items-center">
        <input type="text" placeholder="Search item" name="text" class="input" [(ngModel)]="searchTerm" (input)="performSearch()" />
        <i class="fa-solid fa-magnifying-glass"></i>
      </div>
      <div class="d-flex flex-row gap-4 align-items-center">
        <!-- <h5 class="text-secondary ms-3">Showing results : {{ filteredInventoryData.length }}</h5> -->
        <mat-form-field>
          <mat-label>Company</mat-label>
          <mat-select [(ngModel)]="selectedSupplier" (ngModelChange)="filterInventoryData()">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let item of supplierData" [value]="item.company_name" class="fs-6">
              {{ item.company_name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Category</mat-label>
          <mat-select [(ngModel)]="selectedCategory" (ngModelChange)="filterInventoryData()">
            <mat-option>None</mat-option>
            <mat-option *ngFor="let item of categoryData" [value]="item.category_id" class="fs-6">
              {{ item.category }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="list-container gap-1">
      <div class="item-card" *ngFor="let item of filteredInventoryData">
        <div class="item-img-container">
          <img [src]="item.item_image_url" alt="img" />
        </div>
        <div class="name-price d-flex row mb-4">
          <div class="item-name w-50">{{ item.item_name }}</div>
          <div class="item-name w-50">
            <div class="text-white text-center rounded" style="background-color: var(--black)">{{ item.item_quantity }}</div>
          </div>

          <!-- <div class="item-price w-50 text-end">{{ item.item_price | number : '1.2-2' }}</div> -->
        </div>
        <div class="item-description">
          <img [src]="item.logo_url" alt="" width="30px" />
          {{ item.supplier_name }}
        </div>
        <div class="quantity mb-4">
          <div class="button-group mb-4">
            <button class="minus" (click)="decreaseCount(item)">-</button>
            <input type="text" id="item_count" class="count" [(ngModel)]="item.count" inputmode="numeric" (keydown)="onKeyDown($event)" />
            <button class="plus" (click)="increaseCount(item)">+</button>
          </div>
          <div class="add-btn d-flex justify-content-center">
            <button class="btn-primary" (click)="addToCart(item)"><i class="fa-solid fa-cart-shopping"></i>Add</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="cart">
    <div class="request-header">
      <h3 class="cart-header">Cart</h3>
    </div>
    <div class="request-list" *ngIf="cartList">
      <div class="request-item-container" *ngFor="let item of cartList">
        <div class="request-item">
          <div class="name-quantity">
            <div>{{ item.item_name }}</div>
            <div>x{{ item.count }}</div>
          </div>
          <!-- <div class="request-item-price">{{ item.totalPrice | number : '1.2-2' }}</div> -->
        </div>
        <div class="request-remove" (click)="removeItemFromCart(item)"><i class="fa-solid fa-circle-xmark"></i></div>
      </div>
    </div>
    <div div class="request-list" *ngIf="!cartList">
      <!-- <i class="fa-solid fa-cart-shopping" style="font-size: 50px"></i> -->
      <i class="fa-solid fa-cart-shopping" style="font-size: 50px"></i>
    </div>
    <div class="request-footer d-flex flex-column align-items-center">
      <div class="w-100 mb-3 total-price d-flex justify-content-between px-3">
        <!-- <span class="fs-5"> Total : â‚± {{ calculateTotalAmount() | number : '1.2-2' }}</span> -->
        <span class="fs-6"> Item : {{ calculateTotalItems() }}</span>
      </div>
      <button class="btn-primary" (click)="processRequest()">Process Request</button>
    </div>
  </div>
</div>
